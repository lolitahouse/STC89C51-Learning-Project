C51 COMPILER V9.01   MAIN                                                                  09/30/2022 20:55:51 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN ..\Obj\main.obj
COMPILER INVOKED BY: D:\programming learning software\MCU\keilC51\C51\BIN\C51.EXE main.c BROWSE INCDIR(..\App\bsp_ds18b2
                    -0;..\Public;..\App\bsp_smg) DEBUG OBJECTEXTEND PRINT(..\Listing\main.lst) OBJECT(..\Obj\main.obj)

line level    source

   1          /**************************************************************************************
   2          实验名称：      DS18B20温度传感器实验
   3          实验现象：      插上DS18B20温度传感器，数码管显示检测的温度值
   4          实验单片机：普中A2                      
   5          注意事项：                                                                                                                                                
   6          ***************************************************************************************/
   7          
   8          #include "public.h"
   9          #include  "ds18b20.h"
  10          #include  "smg.h"
  11          
  12          
  13          
  14          int main(void)
  15          {
  16   1              uint_8 i = 0;
  17   1              int temper_value = 0;
  18   1              uint_8 temper_buf[5] = 0;
  19   1      
  20   1              DS18B20_Init();         //初始化DS18B20
  21   1      
  22   1              while(1)
  23   1              {                               
  24   2                      i++;
  25   2                      if(i%50 == 0)           //间隔一段时间读取温度值，间隔时间要大于温度传感器转换温度时间
  26   2                              temper_value = DS18B20_Read_Temperture()*10;    //保留温度值小数后一位
  27   2                      if(temper_value < 0)    //负温度
  28   2                      {
  29   3                              temper_value = -temper_value;
  30   3                              temper_buf[0] = 0x40;   //显示负号      
  31   3                      }
  32   2                      else
  33   2                              temper_buf[0] = 0x00;   //不显示负号
  34   2                      temper_buf[1] = gSmg_init_code[temper_value/1000];                              //百位
  35   2                      temper_buf[2] = gSmg_init_code[temper_value%1000/100];                  //十位
  36   2                      temper_buf[3] = gSmg_init_code[temper_value%1000%100/10]|0x80;  //个位+小数点
  37   2                      temper_buf[4] = gSmg_init_code[temper_value%1000%100%10];                       //小数点后一位
  38   2                      Smg_Display(temper_buf,SHOW_POSITION);
  39   2              }
  40   1      }
  41          
  42          
  43          
  44          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    205    ----
   CONSTANT SIZE    =      5    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       8
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
C51 COMPILER V9.01   MAIN                                                                  09/30/2022 20:55:51 PAGE 2   

END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
