C51 COMPILER V9.01   24C02                                                                 09/30/2022 15:47:05 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE 24C02
OBJECT MODULE PLACED IN ..\Obj\24c02.obj
COMPILER INVOKED BY: D:\programming learning software\MCU\keilC51\C51\BIN\C51.EXE ..\App\bsp_24c02\24c02.c BROWSE INCDIR
                    -(..\App\bsp_24c02;..\Public;..\App\bsp_iic;..\App\bsp_key;..\App\bsp_smg) DEBUG OBJECTEXTEND PRINT(..\Listing\24c02.lst)
                    - OBJECT(..\Obj\24c02.obj)

line level    source

   1          #include  "24c02.h"
   2          #include  "iic.h"
   3          
   4          /*
   5                  函数名： AT24C02_Write_One_Byte
   6                  功能：   在AT24C02指定地址写入一个数据  
   7          */
   8          void AT24C02_Write_One_Byte(uint_8 addr,uint_8 dat)
   9          {                                                                                                                                                                                
  10   1          IIC_Start();  
  11   1              IIC_Write_Byte(0XA0);   //发送写命令              
  12   1              IIC_Wait_Ack();    
  13   1          IIC_Write_Byte(addr);       //发送写地址   
  14   1              IIC_Wait_Ack();                                                                                                            
  15   1              IIC_Write_Byte(dat);    //发送字节                                                         
  16   1              IIC_Wait_Ack();                            
  17   1          IIC_Stop();                         //产生一个停止命令
  18   1              Delay_ms(10);    
  19   1      }
  20          
  21          
  22          /*
  23                  函数名： AT24C02_Read_One_Byte
  24                  功能：   在AT24C02指定地址读出一个数据  
  25          */
  26          uint_8 AT24C02_Read_One_Byte(uint_8 addr)
  27          {                                 
  28   1              uint_8 read_dat = 0;
  29   1                                                                                                                                                                       
  30   1          IIC_Start();  
  31   1              IIC_Write_Byte(0XA0);   //发送写命令       
  32   1              IIC_Wait_Ack(); 
  33   1          IIC_Write_Byte(addr);       //发送写地址  
  34   1              IIC_Wait_Ack();    
  35   1               
  36   1              IIC_Start();               
  37   1              IIC_Write_Byte(0XA1);                   //进入接收模式                             
  38   1              IIC_Wait_Ack();  
  39   1          read_dat = IIC_Read_Byte(0);        //读取字节                 
  40   1          IIC_Stop();                                         //产生一个停止条件 
  41   1                 
  42   1              return read_dat;                        //返回读取的数据
  43   1      }
  44          
  45          
  46          
  47          
  48          
  49          
  50          
  51          
  52          
  53          
C51 COMPILER V9.01   24C02                                                                 09/30/2022 15:47:05 PAGE 2   

  54          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     89    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
