C51 COMPILER V9.01   MAIN                                                                  09/30/2022 15:57:24 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN ..\Obj\main.obj
COMPILER INVOKED BY: D:\programming learning software\MCU\keilC51\C51\BIN\C51.EXE main.c BROWSE INCDIR(..\App\bsp_24c02;
                    -..\Public;..\App\bsp_iic;..\App\bsp_key;..\App\bsp_smg) DEBUG OBJECTEXTEND PRINT(..\Listing\main.lst) OBJECT(..\Obj\main
                    -.obj)

line level    source

   1          /**************************************************************************************
   2          实验名称：      I2C-EEPROM实验
   3          实验现象：      数码管右4位显示0，按K1键将数据写入到EEPROM内保存，
   4                                  按K2键读取EEPROM内保存的数据，按K3键显示数据加1，按K4键显示数据清零，
   5                                  最大能写入的数据是255。
   6          实验单片机：普中A2                      
   7          注意事项：                                                                                                                                                
   8          ***************************************************************************************/
   9          
  10          #include "public.h"
  11          #include  "24c02.h"
  12          #include  "key.h"
  13          #include  "smg.h"
  14          
  15          
  16          
  17          int main(void)
  18          {
  19   1              uint_8 key_value = 0;
  20   1              uint_8 save_value = 0;
  21   1              uint_8 save_buf[3];
  22   1                                              
  23   1              while(1)
  24   1              {
  25   2                      key_value = Key_Scan(KEY_SCAN_MODE);    //单次扫描
  26   2                      if(key_value == KEY1_PRESS)
  27   2                      {
  28   3                              AT24C02_Write_One_Byte(EEPROM_ADDRESS,save_value);       //key1,写入
  29   3                      }
  30   2                      else if(key_value == KEY2_PRESS)
  31   2                      {
  32   3                              save_value = AT24C02_Read_One_Byte(EEPROM_ADDRESS);      //key2，读取
  33   3                      }
  34   2                      else if(key_value == KEY3_PRESS)
  35   2                      {
  36   3                              save_value++;                                                           //key3，加1
  37   3                              if(save_value == 255)
  38   3                                      save_value = 255;
  39   3                      }
  40   2                      else if(key_value == KEY4_PRESS)
  41   2                      {
  42   3                              save_value = 0;                                                         //key4，清零
  43   3                      }
  44   2                      save_buf[0]=save_value/100;
  45   2                      save_buf[1]=save_value%100/10;
  46   2                      save_buf[2]=save_value%100%10;
  47   2                      Smg_Display(save_buf,SHOW_POSITION);         //数码管显示
  48   2              }
  49   1      }
  50          
  51          
  52          
  53          
C51 COMPILER V9.01   MAIN                                                                  09/30/2022 15:57:24 PAGE 2   



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    109    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
