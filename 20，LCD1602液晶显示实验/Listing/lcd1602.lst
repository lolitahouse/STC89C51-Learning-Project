C51 COMPILER V9.01   LCD1602                                                               10/01/2022 21:03:21 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN ..\Obj\lcd1602.obj
COMPILER INVOKED BY: D:\programming learning software\MCU\keilC51\C51\BIN\C51.EXE ..\App\bsp_lcd1602\lcd1602.c BROWSE IN
                    -CDIR(..\App\bsp_lcd1602;..\Public) DEBUG OBJECTEXTEND PRINT(..\Listing\lcd1602.lst) OBJECT(..\Obj\lcd1602.obj)

line level    source

   1          #include  "lcd1602.h"
   2          
   3          
   4          
   5          /*
   6                  函数名：LCD1602_Write_Cmd
   7                  功能：  LCD1602写命令函数
   8                  注意：  默认使用8位数据口LCD1602
   9          */
  10          void LCD1602_Write_Cmd(uint_8 cmd)
  11          {
  12   1              LCD1602_RS = 0;                         //选择命令
  13   1              LCD1602_RW = 0;                         //选择写
  14   1              LCD1602_E = 0;
  15   1              LCD1602_DATAPORT = cmd;         //准备命令
  16   1              Delay_ms(1);
  17   1              LCD1602_E = 1;                          //使能E上升沿写入
  18   1              Delay_ms(1);
  19   1              LCD1602_E = 0;                          //使能E负跳变完成写入   
  20   1      }
  21          
  22          /*
  23                  函数名：LCD1602_Write_Data
  24                  功能：  LCD1602写命令函数
  25                  注意：  默认使用8位数据口LCD1602
  26          */
  27          void LCD1602_Write_Data(uint_8 dat) 
  28          {
  29   1              LCD1602_RS = 1;                         //选择数据
  30   1              LCD1602_RW = 0;                         //选择写
  31   1              LCD1602_E = 0;
  32   1              LCD1602_DATAPORT = dat;         //准备数据
  33   1              Delay_ms(1);
  34   1              LCD1602_E = 1;                          //使能E上升沿写入
  35   1              Delay_ms(1);
  36   1              LCD1602_E = 0;                          //使能E负跳变完成写入           
  37   1      }
  38          
  39          /*
  40                  函数名：LCD1602_Init
  41                  功能：  LCD1602初始化
  42                  注意：  默认使用8位数据口LCD1602
  43          */
  44          void LCD1602_Init(void)
  45          {
  46   1              LCD1602_Write_Cmd(0x38);                //数据总线8位，显示2行，5*7点阵/字符
  47   1              LCD1602_Write_Cmd(0x0c);                //显示功能开，无光标，光标闪烁
  48   1              LCD1602_Write_Cmd(0x06);                //写入新数据后光标右移，显示屏不移动
  49   1              LCD1602_Write_Cmd(0x01);                //清屏  
  50   1      }
  51          
  52          /*
  53                  函数名：LCD1602_Clear
  54                  功能：  LCD1602清屏
C51 COMPILER V9.01   LCD1602                                                               10/01/2022 21:03:21 PAGE 2   

  55                  注意：  默认使用8位数据口LCD1602
  56          */
  57          void LCD1602_Clear(void)
  58          {
  59   1              LCD1602_Write_Cmd(0x01);        
  60   1      }
  61          
  62          /*
  63                  函数名：LCD1602_Show_String
  64                  功能：  LCD1602显示字符
  65                  注意：  x,y为显示坐标，x=0~15，y=0~1;
  66          */
  67          void LCD1602_Show_String(uint_8 x,uint_8 y,uint_8 *str)
  68          {
  69   1              uint_8 i = 0;
  70   1      
  71   1              if(y>1||x>15)
  72   1                      return;                 //行列参数不对则强制退出
  73   1      
  74   1              if(y < 1)                       //第1行显示
  75   1              {       
  76   2                      while(*str != '\0')             //字符串是以'\0'结尾，只要前面有内容就显示
  77   2                      {
  78   3                              if(i < 16-x)            //如果字符长度超过第一行显示范围，则在第二行继续显示
  79   3                              {
  80   4                                      LCD1602_Write_Cmd(0x80+i+x);    //第一行显示地址设置    
  81   4                              }
  82   3                              else
  83   3                              {
  84   4                                      LCD1602_Write_Cmd(0x40+0x80+i+x-16);    //第二行显示地址设置    
  85   4                              }
  86   3                              LCD1602_Write_Data(*str);               //显示内容
  87   3                              str++;                                                  //指针递增
  88   3                              i++;    
  89   3                      }       
  90   2              }
  91   1              else                            //第2行显示
  92   1              {
  93   2                      while(*str != '\0')
  94   2                      {
  95   3                              if(i < 16-x)            //如果字符长度超过第二行显示范围，则在第一行继续显示
  96   3                              {
  97   4                                      LCD1602_Write_Cmd(0x80+0x40+i+x);       
  98   4                              }
  99   3                              else
 100   3                              {
 101   4                                      LCD1602_Write_Cmd(0x80+i+x-16); 
 102   4                              }
 103   3                              LCD1602_Write_Data(*str);
 104   3                              str++;
 105   3                              i++;    
 106   3                      }       
 107   2              }                               
 108   1      }
 109          
 110          
 111          
 112          
 113          
 114          
 115          
 116          
C51 COMPILER V9.01   LCD1602                                                               10/01/2022 21:03:21 PAGE 3   

 117          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    236    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
