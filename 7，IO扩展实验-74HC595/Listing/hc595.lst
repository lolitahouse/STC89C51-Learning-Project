C51 COMPILER V9.01   HC595                                                                 09/29/2022 23:34:06 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE HC595
OBJECT MODULE PLACED IN ..\Obj\hc595.obj
COMPILER INVOKED BY: D:\programming learning software\MCU\keilC51\C51\BIN\C51.EXE ..\App\bsp_hc595\hc595.c BROWSE INCDIR
                    -(..\App\bsp_hc595;..\Public) DEBUG OBJECTEXTEND PRINT(..\Listing\hc595.lst) OBJECT(..\Obj\hc595.obj)

line level    source

   1          #include  "hc595.h"
   2          
   3          
   4          // LEDDZ的行显示数据
   5          uint_8 gHC595_buf[8] = {0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80};
   6          
   7          
   8          
   9          /*
  10                  函数名：HC595_Write_Data
  11                  功能：  向74HC595写入一个字节的数据
  12          */
  13          void HC595_Write_Data(uint_8 dat)
  14          {
  15   1              uint_8 i = 0;
  16   1      
  17   1              for(i=0;i<8;i++)        //循环8次即可将一个字节写入寄存器中
  18   1              {
  19   2                      SER = dat >>7;  //优先传输高位,故先将高位移到最低位
  20   2                      dat <<= 1;              //将次高位移到高位
  21   2                      SRCLK = 0;
  22   2                      Delay_10us(1);
  23   2                      SRCLK = 1;
  24   2                      Delay_10us(1);  //移位寄存器时钟上升沿将端口数据送入寄存器中
  25   2              }
  26   1              RCLk = 0;
  27   1              Delay_10us(1);
  28   1              RCLk = 1;                       //存储寄存器时钟上升沿将前面写入到寄存器的数据输出
  29   1      }
  30          
  31          void HC595_Display(void)
  32          {
  33   1              static uint_8 i = 0;
  34   1      
  35   1              for(i=0;i<8;i++)
  36   1              {
  37   2                      HC595_Write_Data(0x00); //消除前面寄存器缓存数据
  38   2                      HC595_Write_Data(gHC595_buf[i]);        //写入新的数据
  39   2                      Delay_ms(500);                  //延时500ms
  40   2              }
  41   1              for(i=6;i>0;i--)
  42   1              {
  43   2                      HC595_Write_Data(0x00); //消除前面寄存器缓存数据
  44   2                      HC595_Write_Data(gHC595_buf[i]);        //写入新的数据
  45   2                      Delay_ms(500);                  //延时500ms     
  46   2              }
  47   1      }
  48          
  49          
  50          
  51          
  52          
  53          
  54          
C51 COMPILER V9.01   HC595                                                                 09/29/2022 23:34:06 PAGE 2   

  55          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    126    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      9       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
