C51 COMPILER V9.01   HC595                                                                 09/30/2022 00:00:28 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE HC595
OBJECT MODULE PLACED IN ..\Obj\hc595.obj
COMPILER INVOKED BY: D:\programming learning software\MCU\keilC51\C51\BIN\C51.EXE ..\App\bsp_hc595\hc595.c BROWSE INCDIR
                    -(..\App\bsp_hc595;..\Public) DEBUG OBJECTEXTEND PRINT(..\Listing\hc595.lst) OBJECT(..\Obj\hc595.obj)

line level    source

   1          #include  "hc595.h"
   2          
   3          
   4          uint_8 gled_row[8] = {0x00,0x7C,0x82,0x82,0x82,0x7C,0x00,0x00};//LED点阵显示数字0的行数据
   5          uint_8 gled_row_heart[8] = {0x38,0x7C,0x7E,0x3F,0x3F,0x7E,0x7C,0x38};//LED点阵显示心形的行数据
   6          uint_8 gled_col[8] = {0x7f,0xbf,0xdf,0xef,0xf7,0xfb,0xfd,0xfe};//LED点阵显示列数据
   7          
   8          
   9          
  10          /*
  11                  函数名：HC595_Write_Data
  12                  功能：  向74HC595写入一个字节的数据
  13          */
  14          void HC595_Write_Data(uint_8 dat)
  15          {
  16   1              uint_8 i = 0;
  17   1      
  18   1              for(i=0;i<8;i++)        //循环8次即可将一个字节写入寄存器中
  19   1              {
  20   2                      SER = dat >>7;  //优先传输高位,故先将高位移到最低位
  21   2                      dat <<= 1;              //将次高位移到高位
  22   2                      SRCLK = 0;
  23   2                      Delay_10us(1);
  24   2                      SRCLK = 1;
  25   2                      Delay_10us(1);  //移位寄存器时钟上升沿将端口数据送入寄存器中
  26   2              }
  27   1              RCLk = 0;
  28   1              Delay_10us(1);
  29   1              RCLk = 1;                       //存储寄存器时钟上升沿将前面写入到寄存器的数据输出
  30   1      }
  31          
  32          
  33          /*
  34                  函数名：HC595_Display
  35                  功能：  显示数字0 或 心形的图像
  36          */
  37          void HC595_Display(void)
  38          {
  39   1              static uint_8 i = 0;
  40   1      
  41   1              for(i=0;i<8;i++)//循环8次扫描8行、列
  42   1              {
  43   2                      LEDDZ_COL_PORT = gled_col[i];    //传送列选数据
  44   2                      HC595_Write_Data(gled_row_heart[i]);   //传送行选数据
  45   2                      Delay_10us(100);                                 //延时一段时间，等待显示稳定
  46   2                      HC595_Write_Data(0x00);              //消影     
  47   2              }
  48   1      }
  49          
  50          
  51          
  52          
  53          
  54          
C51 COMPILER V9.01   HC595                                                                 09/30/2022 00:00:28 PAGE 2   

  55          
  56          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    107    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     25       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
