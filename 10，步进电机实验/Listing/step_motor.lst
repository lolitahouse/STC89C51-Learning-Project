C51 COMPILER V9.01   STEP_MOTOR                                                            09/30/2022 00:21:26 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE STEP_MOTOR
OBJECT MODULE PLACED IN ..\Obj\step_motor.obj
COMPILER INVOKED BY: D:\programming learning software\MCU\keilC51\C51\BIN\C51.EXE ..\App\bsp_step_motor\step_motor.c BRO
                    -WSE INCDIR(..\App\bsp_step_motor;..\Public;..\App\bsp_key) DEBUG OBJECTEXTEND PRINT(..\Listing\step_motor.lst) OBJECT(..
                    -\Obj\step_motor.obj)

line level    source

   1          #include  "step_motor.h"
   2          
   3          /*
   4                  函数名：Step_Motor_Send_Pulse
   5                  功能：  输出一个数据给ULN2003，从而实现向步进电机发送一个脉冲
   6                  参数：  step： 指定步进序号，可选值0~7
   7                                  dir：  方向选择, 1：顺时针,0：逆时针    
   8          */
   9          void Step_Motor_Send_Pulse(uint_8 step,uint_8 dir)
  10          {
  11   1              uint_8 temp = step;
  12   1              
  13   1              if(dir == 0)                    //如果为逆时针旋转
  14   1                      temp = 7-step;          //调换节拍信号
  15   1              switch(temp)//8个节拍控制：A->AB->B->BC->C->CD->D->DA
  16   1              {
  17   2                      case 0: IN1_A=1;IN2_B=0;IN3_C=0;IN4_D=0; break;
  18   2                      case 1: IN1_A=1;IN2_B=1;IN3_C=0;IN4_D=0; break;
  19   2                      case 2: IN1_A=0;IN2_B=1;IN3_C=0;IN4_D=0; break;
  20   2                      case 3: IN1_A=0;IN2_B=1;IN3_C=1;IN4_D=0; break;
  21   2                      case 4: IN1_A=0;IN2_B=0;IN3_C=1;IN4_D=0; break;
  22   2                      case 5: IN1_A=0;IN2_B=0;IN3_C=1;IN4_D=1; break;
  23   2                      case 6: IN1_A=0;IN2_B=0;IN3_C=0;IN4_D=1; break;
  24   2                      case 7: IN1_A=1;IN2_B=0;IN3_C=0;IN4_D=1; break;
  25   2                      default: IN1_A=0;IN2_B=0;IN3_C=0;IN4_D=0; break;//停止相序      
  26   2              }                       
  27   1      }
  28          
  29          
  30          
  31          
  32          
  33          
  34          
  35          
  36          
  37          
  38          
  39          
  40          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    107    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
